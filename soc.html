<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Axentra SOC Portal</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { background: #121c2b; color: #ffd700; font-family: Montserrat, Arial, sans-serif; margin:0;}
    .sidebar { width: 260px; background: #172033; height: 100vh; float: left; padding-top: 20px; position: fixed; }
    .sidebar h1 { font-size: 2.5em; padding: 0 0 40px 24px; color: #ffd700;}
    .sidebar .nav { width: 100%; background: none; border: none; color: #fff; font-size: 1.25em; text-align: left; padding: 18px 0 18px 24px; cursor: pointer; transition: 0.2s; outline:none; }
    .sidebar .nav.active { background: #232d41; color: #ffd700; font-weight: bold; }
    .sidebar .logout { background: #ffd700; color: #172033; font-size: 1.3em; font-weight: bold; border-radius: 16px; margin: 50px 24px 0 24px; box-shadow: 0 2px 16px #ffd70044; width: 85%; border:none; padding:20px;}
    .main { margin-left: 260px; padding: 40px 50px; background: #172033; min-height: 100vh;}
    .tab { display:none;}
    .tab.active { display:block;}
    .panel {background:#1a2233; border-radius:24px; padding:35px 32px; margin-bottom:32px;}
    h2 {color:#ffd700; font-size:2.1em; margin:0 0 16px 0;}
    h3 {color:#ffd700; font-size:1.4em;}
    .summary li {margin-bottom:8px;}
    .incident-table {width:100%; color:#fff; border-spacing:0;}
    .incident-table th, .incident-table td {padding:13px 14px;}
    .incident-table th {color:#ffd700; font-size:1.1em; border-bottom:1.5px solid #28344c;}
    .incident-table td {border-bottom:1px solid #222e45;}
    .status-blocked {color:#12ef62; font-weight:bold;}
    .status-mitigated {color:#ffa500;}
    .status-under {color:#ffd700;}
    .users-table {width:100%; color:#fff; border-spacing:0;}
    .users-table th, .users-table td {padding:14px 12px;}
    .users-table th {color:#ffd700; font-size:1.1em; border-bottom:1.5px solid #28344c;}
    .users-table td {border-bottom:1px solid #222e45;}
    .forensics-link {color:#ffd700; font-weight:bold;}
    .threat-legend {margin-top:24px; font-size:1.13em;}
    .threat-legend span {margin-right:24px;}
    .threat-legend .red {color:#ff4c4c; font-weight:bold;}
    .threat-legend .orange {color:#ffa500; font-weight:bold;}
    .threat-legend .yellow {color:#ffff40; font-weight:bold;}
    @media (max-width: 900px) {
      .main {padding:15px;}
      .panel {padding:15px;}
      .sidebar {width:180px;}
      .main {margin-left:180px;}
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h1>Axentra SOC</h1>
    <div id="nav-dashboard" class="nav active" onclick="showTab('dashboard')">Dashboard</div>
    <div id="nav-incidents" class="nav" onclick="showTab('incidents')">Incidents</div>
    <div id="nav-threatmap" class="nav" onclick="showTab('threatmap')">Threat Map</div>
    <div id="nav-users" class="nav" onclick="showTab('users')">Users</div>
    <div id="nav-forensics" class="nav" onclick="showTab('forensics')">Forensics</div>
    <button class="logout" onclick="alert('Logged out!')">Logout</button>
  </div>
  <div class="main">
    <!-- Dashboard -->
    <div id="tab-dashboard" class="tab active">
      <div class="panel">
        <h2>Welcome to Axentra SOC</h2>
        Real-time threat monitoring.<br>
        <b>Active Incidents:</b> 3<br>
        <b>Live Users:</b> 22<br>
        <b>Last Attack:</b> 12 min ago (SQL Injection)
      </div>
      <div class="panel">
        <h2>Summary</h2>
        <ul class="summary">
          <li>99.9% Uptime</li>
          <li>AI-driven threat detection</li>
          <li>Automatic response to critical events</li>
        </ul>
      </div>
    </div>
    <!-- Incidents -->
    <div id="tab-incidents" class="tab">
      <div class="panel" style="background:#ffd700; color:#172033; font-weight:bold; font-size:1.25em;">
        3 new incidents detected in the past hour!
      </div>
      <div class="panel">
        <h2>Incident Log</h2>
        <table class="incident-table">
          <tr>
            <th>Time</th><th>Type</th><th>Status</th>
          </tr>
          <tr>
            <td>09:41</td><td>Phishing Attempt</td><td class="status-blocked">Blocked</td>
          </tr>
          <tr>
            <td>09:17</td><td>SQL Injection</td><td class="status-mitigated">Mitigated</td>
          </tr>
          <tr>
            <td>08:55</td><td>DDoS</td><td class="status-under">Under Investigation</td>
          </tr>
        </table>
      </div>
    </div>
    <!-- Threat Map -->
    <div id="tab-threatmap" class="tab">
      <div class="panel">
        <h2>Threat Map</h2>
        <div id="globe-container" style="height:400px;width:100%;max-width:600px;margin:0 auto;"></div>
        <div class="threat-legend">
          <span class="red">Red: Active attacks</span>
          <span class="orange">Orange: Recent attempts</span>
          <span class="yellow">Yellow: Suspicious activity</span>
        </div>
      </div>
    </div>
    <!-- Users -->
    <div id="tab-users" class="tab">
      <div class="panel">
        <h2>Users & Roles</h2>
        <table class="users-table">
          <tr><th>User</th><th>Role</th><th>Status</th></tr>
          <tr><td>admin@paypal.com</td><td>Admin</td><td>Active</td></tr>
          <tr><td>j.doe@paypal.com</td><td>Analyst</td><td>Active</td></tr>
          <tr><td>s.eco@paypal.com</td><td>Read-Only</td><td>Inactive</td></tr>
        </table>
      </div>
    </div>
    <!-- Forensics -->
    <div id="tab-forensics" class="tab">
      <div class="panel">
        <h2>Forensics</h2>
        <ul>
          <li>Full packet capture available for past 72h</li>
          <li>Malware sandboxing (automated)</li>
          <li>Download last report: <a href="#" onclick="downloadPDF();return false;" class="forensics-link">PDF</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- JS: Tabs and Map -->
  <script src="https://unpkg.com/echarts@5.5.0/dist/echarts.min.js"></script>
  <script src="https://unpkg.com/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
  <script>
    function showTab(tab) {
      document.querySelectorAll('.tab').forEach(e=>e.classList.remove('active'));
      document.querySelectorAll('.nav').forEach(e=>e.classList.remove('active'));
      document.getElementById('tab-'+tab).classList.add('active');
      document.getElementById('nav-'+tab).classList.add('active');
      if(tab === 'threatmap') drawMap();
    }

    // Simple globe map using echarts (חינמי, עובד, אינטראקטיבי)
    let mapInitialized = false;
    function drawMap() {
      if(mapInitialized) return;
      mapInitialized = true;
      const dom = document.getElementById('globe-container');
      const myChart = echarts.init(dom);
      myChart.setOption({
        globe: {
          baseTexture: 'https://echarts.apache.org/examples/data-gl/asset/earth-dark.jpg',
          heightTexture: 'https://echarts.apache.org/examples/data-gl/asset/bathymetry_bw_composite_4k.jpg',
          shading: 'lambert',
          environment: '#121c2b',
          light: { main: { intensity: 2 }, ambient: { intensity: 0.5 } },
        },
        series: [{
          type: 'map3D',
          map: 'world',
          regionHeight: 1.5,
          emphasis: { label: { show: true, color: '#fff', fontWeight:'bold', fontSize:16 } },
          itemStyle: {
            color: function(params) {
              // דוגמאות: סימון מדינות בצבע לפי איום
              if(params.name === 'Russia' || params.name === 'China') return '#ff4c4c';
              if(params.name === 'United States' || params.name === 'Brazil') return '#ffa500';
              if(params.name === 'Ukraine') return '#ffff40';
              return '#29395c';
            },
            borderColor: '#333'
          },
          label: { show: false }
        }]
      });
      myChart.on('mouseover', function (params) {
        // Tooltip דינמי (מדינה, סוג איום)
        if(params.name==='Russia'||params.name==='China')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Active attacks", backgroundColor:"#222", textStyle:{color:'#ffd700',fontWeight:'bold',fontSize:18} }});
        else if(params.name==='United States'||params.name==='Brazil')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Recent attempts", backgroundColor:"#222", textStyle:{color:'#ffa500',fontWeight:'bold',fontSize:18} }});
        else if(params.name==='Ukraine')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Suspicious activity", backgroundColor:"#222", textStyle:{color:'#ffff40',fontWeight:'bold',fontSize:18} }});
        else
          myChart.setOption({ tooltip: { show: false }});
      });
    }

    // PDF דמו (עובד!)
    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(22);
      doc.text('Forensics Report', 20, 30);
      doc.setFontSize(15);
      doc.text('Full packet capture available for past 72h', 20, 50);
      doc.text('Malware sandboxing (automated)', 20, 60);
      doc.save('forensics-report.pdf');
    }
  </script>
</body>
</html>
