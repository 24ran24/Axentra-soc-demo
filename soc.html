<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Axentra SOC Portal</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { background: #162032; color: #ffd700; font-family: 'Montserrat', Arial, sans-serif; margin:0;}
    .sidebar { width: 240px; background: #202c42; height: 100vh; float: left; padding-top: 22px; position: fixed; }
    .sidebar h1 { font-size: 2.2em; padding: 0 0 36px 22px; color: #ffd700; line-height: 1.1; }
    .sidebar .nav { background: none; border: none; color: #fff; font-size: 1.1em; text-align: left; padding: 14px 0 14px 24px; cursor: pointer; transition: 0.2s; outline:none; width: 100%; }
    .sidebar .nav.active { background: #242f45; color: #ffd700; font-weight: bold; }
    .sidebar .logout { background: #ffd700; color: #202c42; font-size: 1.08em; font-weight: bold; border-radius: 13px; margin: 36px 22px 0 22px; box-shadow: 0 2px 10px #ffd70035; width: 86%; border:none; padding:15px;}
    .main { margin-left: 240px; padding: 30px 40px; background: #192236; min-height: 100vh;}
    .tab { display:none;}
    .tab.active { display:block;}
    .panel {background:#232d41; border-radius:18px; padding:24px 28px; margin-bottom:25px;}
    h2 {color:#ffd700; font-size:1.42em; margin:0 0 13px 0; font-weight: bold;}
    h3 {color:#ffd700; font-size:1.1em;}
    .summary li {margin-bottom:7px; color: #fff; font-size:1em;}
    .incident-table {width:100%; color:#fff; border-spacing:0; font-size:1em;}
    .incident-table th, .incident-table td {padding:10px 12px;}
    .incident-table th {color:#ffd700; font-size:1em; border-bottom:1.5px solid #28344c;}
    .incident-table td {border-bottom:1px solid #222e45;}
    .status-blocked {color:#12ef62; font-weight:bold;}
    .status-mitigated {color:#ffa500;}
    .status-under {color:#ffd700;}
    .users-table {width:100%; color:#fff; border-spacing:0; font-size:1em;}
    .users-table th, .users-table td {padding:11px 10px;}
    .users-table th {color:#ffd700; font-size:1em; border-bottom:1.5px solid #28344c;}
    .users-table td {border-bottom:1px solid #222e45;}
    .forensics-link {color:#ffd700; font-weight:bold;}
    .threat-legend {margin-top:14px; font-size:1em;}
    .threat-legend span {margin-right:18px;}
    .threat-legend .red {color:#ff4c4c; font-weight:bold;}
    .threat-legend .orange {color:#ffa500; font-weight:bold;}
    .threat-legend .yellow {color:#ffff40; font-weight:bold;}
    ul {padding-left:24px;}
    a {color: #ffd700;}
    @media (max-width: 900px) {
      .main {padding:10px;}
      .panel {padding:10px;}
      .sidebar {width:150px;}
      .main {margin-left:150px;}
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h1>Axentra SOC</h1>
    <div id="nav-dashboard" class="nav active" onclick="showTab('dashboard')">Dashboard</div>
    <div id="nav-incidents" class="nav" onclick="showTab('incidents')">Incidents</div>
    <div id="nav-threatmap" class="nav" onclick="showTab('threatmap')">Threat Map</div>
    <div id="nav-users" class="nav" onclick="showTab('users')">Users</div>
    <div id="nav-forensics" class="nav" onclick="showTab('forensics')">Forensics</div>
    <button class="logout" onclick="alert('Logged out!')">Logout</button>
  </div>
  <div class="main">
    <!-- Dashboard -->
    <div id="tab-dashboard" class="tab active">
      <div class="panel">
        <h2>Welcome to Axentra SOC</h2>
        <div style="color:#fff;font-size:1em;">
          Real-time threat monitoring.<br>
          <b>Active Incidents:</b> 3<br>
          <b>Live Users:</b> 22<br>
          <b>Last Attack:</b> 12 min ago (SQL Injection)
        </div>
      </div>
      <div class="panel">
        <h2>Summary</h2>
        <ul class="summary">
          <li>99.9% Uptime</li>
          <li>AI-driven threat detection</li>
          <li>Automatic response to critical events</li>
        </ul>
      </div>
    </div>
    <!-- Incidents -->
    <div id="tab-incidents" class="tab">
      <div class="panel" style="background:#ffd700; color:#202c42; font-weight:bold; font-size:1.09em;">
        3 new incidents detected in the past hour!
      </div>
      <div class="panel">
        <h2>Incident Log</h2>
        <table class="incident-table">
          <tr>
            <th>Time</th><th>Type</th><th>Status</th>
          </tr>
          <tr>
            <td>09:41</td><td>Phishing Attempt</td><td class="status-blocked">Blocked</td>
          </tr>
          <tr>
            <td>09:17</td><td>SQL Injection</td><td class="status-mitigated">Mitigated</td>
          </tr>
          <tr>
            <td>08:55</td><td>DDoS</td><td class="status-under">Under Investigation</td>
          </tr>
        </table>
      </div>
    </div>
    <!-- Threat Map -->
    <div id="tab-threatmap" class="tab">
      <div class="panel">
        <h2>Threat Map</h2>
        <div id="globe-container" style="height:350px;width:100%;max-width:550px;margin:0 auto;background: #222b38;border-radius:10px;"></div>
        <div class="threat-legend">
          <span class="red">Red: Active attacks</span>
          <span class="orange">Orange: Recent attempts</span>
          <span class="yellow">Yellow: Suspicious activity</span>
        </div>
      </div>
    </div>
    <!-- Users -->
    <div id="tab-users" class="tab">
      <div class="panel">
        <h2>Users & Roles</h2>
        <table class="users-table">
          <tr><th>User</th><th>Role</th><th>Status</th></tr>
          <tr><td>admin@paypal.com</td><td>Admin</td><td>Active</td></tr>
          <tr><td>j.doe@paypal.com</td><td>Analyst</td><td>Active</td></tr>
          <tr><td>s.eco@paypal.com</td><td>Read-Only</td><td>Inactive</td></tr>
        </table>
      </div>
    </div>
    <!-- Forensics -->
    <div id="tab-forensics" class="tab">
      <div class="panel">
        <h2>Forensics</h2>
        <ul>
          <li>Full packet capture available for past 72h</li>
          <li>Malware sandboxing (automated)</li>
          <li>Download last report: <a href="#" onclick="downloadPDF();return false;" class="forensics-link">PDF</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- JS: Tabs and Map -->
  <script src="https://unpkg.com/echarts@5.5.0/dist/echarts.min.js"></script>
  <script src="https://unpkg.com/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
  <script>
    function showTab(tab) {
      document.querySelectorAll('.tab').forEach(e=>e.classList.remove('active'));
      document.querySelectorAll('.nav').forEach(e=>e.classList.remove('active'));
      document.getElementById('tab-'+tab).classList.add('active');
      document.getElementById('nav-'+tab).classList.add('active');
      if(tab === 'threatmap') drawMap();
    }

    // Globe Map (echarts) — אינטראקטיבי, חינמי, עובד
    let mapInitialized = false;
    function drawMap() {
      if(mapInitialized) return;
      mapInitialized = true;
      const dom = document.getElementById('globe-container');
      const myChart = echarts.init(dom);
      myChart.setOption({
        globe: {
          baseTexture: 'https://echarts.apache.org/examples/data-gl/asset/earth-dark.jpg',
          heightTexture: 'https://echarts.apache.org/examples/data-gl/asset/bathymetry_bw_composite_4k.jpg',
          shading: 'lambert',
          environment: '#172033',
          light: { main: { intensity: 1.5 }, ambient: { intensity: 0.7 } },
        },
        series: [{
          type: 'map3D',
          map: 'world',
          regionHeight: 2,
          emphasis: { label: { show: true, color: '#fff', fontWeight:'bold', fontSize:15 } },
          itemStyle: {
            color: function(params) {
              // Example: mark country by threat level
              if(params.name === 'Russia' || params.name === 'China') return '#ff4c4c';
              if(params.name === 'United States' || params.name === 'Brazil') return '#ffa500';
              if(params.name === 'Ukraine') return '#ffff40';
              return '#29395c';
            },
            borderColor: '#384060'
          },
          label: { show: false }
        }]
      });
      myChart.on('mouseover', function (params) {
        // Tooltip דינמי (מדינה, סוג איום)
        if(params.name==='Russia'||params.name==='China')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Active attacks", backgroundColor:"#222", textStyle:{color:'#ffd700',fontWeight:'bold',fontSize:15} }});
        else if(params.name==='United States'||params.name==='Brazil')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Recent attempts", backgroundColor:"#222", textStyle:{color:'#ffa500',fontWeight:'bold',fontSize:15} }});
        else if(params.name==='Ukraine')
          myChart.setOption({ tooltip: { show: true, formatter: params.name+": Suspicious activity", backgroundColor:"#222", textStyle:{color:'#ffff40',fontWeight:'bold',fontSize:15} }});
        else
          myChart.setOption({ tooltip: { show: false }});
      });
    }

    // PDF (דמו, עובד)
    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text('Forensics Report', 20, 22);
      doc.setFontSize(12);
      doc.text('Full packet capture available for past 72h', 20, 38);
      doc.text('Malware sandboxing (automated)', 20, 48);
      doc.save('forensics-report.pdf');
    }
  </script>
</body>
</html>
